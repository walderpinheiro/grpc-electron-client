import{remote}from"electron";export default class GrpcClient{constructor(e,o,r=null,t=null){const n=require("@/grpc/proto.json");if(!(o in n))throw new Error("O arquivo proto informado não consta nos diretórios do projeto. Utilize o ClientEnum ou informe o nome do arquivo sem extensão");this.client=remote.getGlobal("createClient")(e,n[o],r,t)}request(e,o,r=!1,t={}){const n=this.client[e](o,t);let s=[];return new Promise((e,o)=>{if(!r)return e(n);n.on("data",e=>{s.push(e)});let t=[];n.on("status",r=>{switch(r.code){case 0:e(s);break;case 2:case 3:case 4:t.push(r);break;case 5:o({code:5,error:r.details,stackTrace:t})}})})}}
